<h1>映画を検索</h1>

<%= form_with url: search_works_path, method: :get, local: true do |f| %>
  <%= f.label :query, "映画タイトルを入力" %>
  <%= f.text_field :query, value: params[:query] %>
  <%= f.submit "検索" %>
<% end %>


<h1>人気の映画</h1>

<table>
  <thead>
    <tr>
      <th>タイトル</th>
      <th>ジャンル</th>
      <th>公開日</th>
      <th>サムネイル</th>
    </tr>
  </thead>
  <tbody>
    <% @popular_movies.first(5).each do |movie| %>
      <tr>
        <td><%= link_to movie[:title], work_path(id: movie[:api_id]) %></td>
        <td><%= movie[:genre] %></td>
        <td><%= movie[:release_date] %></td>
        <td>
          <% if movie[:thumbnail_url].present? %>
            <img src="<%= movie[:thumbnail_url] %>" alt="<%= movie[:title] %>のサムネイル" width="100">
          <% else %>
            <p>サムネイルなし</p>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h1>新着映画</h1>

<table>
  <thead>
    <tr>
      <th>タイトル</th>
      <th>ジャンル</th>
      <th>公開日</th>
      <th>サムネイル</th>
    </tr>
  </thead>
  <tbody>
    <% @now_playing_movies.first(5).each do |movie| %>
      <tr>
        <td><%= link_to movie[:title], work_path(id: movie[:api_id]) %></td>
        <td><%= movie[:genre] %></td>
        <td><%= movie[:release_date] %></td>
        <td>
          <% if movie[:thumbnail_url].present? %>
            <img src="<%= movie[:thumbnail_url] %>" alt="<%= movie[:title] %>のサムネイル" width="100">
          <% else %>
            <p>サムネイルなし</p>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>